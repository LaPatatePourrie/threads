define([],function(){return{url:function(e,t){var n="http://127.0.0.1:1337";return{threads:n+"/thread",thread:n+"/thread/"+e,author:n+"/author/"+e,authors:n+"/author",messagesByAuthor:n+"/author/"+e+"/messages",threadsByAuthor:n+"/author/"+e+"/threads",updateMessage:n+"/message/"+e,postMessage:n+"/message"}}}}),define(["backbone","angular","filters","services","directives","controllers"],function(e,t,n,r,i,s){return t.module("threads",["threads.controllers","threads.filters","threads.services","threads.directives"])}),define(["backbone","api"],function(e,t){var n=e.RelationalModel.extend({url:function(){return t.url(this.id).author}}),r=e.RelationalModel.extend({relations:[{type:e.HasOne,key:"author",relatedModel:n}]}),i=e.RelationalModel.extend({relations:[{type:e.HasMany,key:"messages",relatedModel:r,reverseRelation:{key:"thread"}},{type:e.HasOne,key:"author",relatedModel:n},{type:e.HasOne,key:"lastAuthor",relatedModel:n}],url:function(){return t.url(this.id).thread}}),s=e.Collection.extend({model:i,url:function(){return t.url().threads},sort_key:"id"}),o=e.Collection.extend({model:n,url:function(){return t.url().authors},sort_key:"id"}),u=e.Collection.extend({model:r});e.Collection.prototype.comparator=function(e){return e.get(this.sort_key)},e.Collection.prototype.sortByField=function(e,t){this.comparator=function(e){return e.get(this.sort_key)},t&&(this.comparator=function(e){return-e.get(this.sort_key)}),this.sort_key=e,this.sort()},window.Message=r,window.Thread=i,window.Author=n,window.Messages=u,window.Threads=s,window.Authors=o;return}),require.config({baseUrl:"src/js",paths:{"utils-form":"utils/Form",api:"api",angular:"lib/angular/angular",backbone:"lib/backbone/backbone-relational",_backbone:"lib/backbone/backbone",text:"lib/require/text",underscore:"lib/underscore/underscore",jquery:"lib/jquery/jquery"},shim:{angular:{exports:"angular"},backbone:{exports:"Backbone",deps:["_backbone"]},_backbone:{deps:["underscore","jquery"]},underscore:{exports:"_"},jquery:{exports:"$"},angularMocks:{deps:["angular"],exports:"angular.mock"}},priority:["angular"]}),require(["angular","backbone-data","app","routes"],function(e,t,n,r){e.bootstrap(document,[n.name])}),define(["angular","services","underscore","utils-form"],function(e,t,n,r){var i=e.module("threads.controllers",["threads.services"]),s=["threads","thread","authors"];return n(s).each(function(e){i.controller(e,["$scope","$injector",function(t,n){t.sortBy=function(e,n){t.sort.field.id=n,t.sort.desc=!t.sort.desc,e.sortByField(t.sort.field.id,t.sort.desc)},t.rootPath="src",t.forms={message:(new r).init({order:["content"],data:{content:{label:"Votre message :",type:"textarea",valid:["notEmpty"]}}}),thread:(new r).init({order:["title","content"],data:{title:{label:"Titre :",type:"input",detail:"text",valid:["notEmpty"]},content:{label:"Votre message :",type:"textarea",valid:["notEmpty"]}}})},require(["controllers/"+e+"Ctrl"],function(e){n.invoke(e,this,{$scope:t})})}])}),i}),define(["angular","services"],function(e,t){e.module("threads.directives",["threads.services"]).directive("form",function(){return{restrict:"A",replace:!1,templateUrl:"src/partials/modules/form.html",link:function(e,t,n){e.$watch("forms",function(){e.form=e.forms[n.form]})}}})}),define(["angular","services"],function(e,t){e.module("threads.filters",["threads.services"]).filter("interpolate",["version",function(e){return function(t){return String(t).replace(/\%VERSION\%/mg,e)}}])}),define(["angular","app"],function(e,t){var n="src/partials";return t.config(["$routeProvider",function(e){e.when("/threads",{templateUrl:n+"/threads.html",controller:"threads"}),e.when("/threads/:id",{templateUrl:n+"/thread.html",controller:"threads"}),e.when("/authors",{templateUrl:n+"/authors.html",controller:"authors"}),e.when("/authors/:id",{templateUrl:n+"/author.html",controller:"authors"}),e.otherwise({redirectTo:"/threads"})}])}),define(["angular"],function(e){e.module("threads.services",[]).value("version","0.1")});